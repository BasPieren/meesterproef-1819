# Meesterproef 2019 @cmda-minor-web · 2018-2019 ⚙️

This is my personal repo for the @cmda-minor-web 2019 meesterproef.

![Project image](https://i.imgur.com/ETWYR4w.png)

> The final prototype

## Table of Contents 🗃

- [Description](#description-)
- [The Project](#the-project-)
  - [The Stakeholders](#the-stakeholders)
  - [The Context](#the-context)
  - [Design Decisions](#design-decisions)
- [Learning Goals](#learning-goals-)
- [Design Rationale](#design-rationale-)
- [Product Biography](#product-biography-)
  - [Week 1](#week-1)
  - [Week 2](#week-2)
  - [Week 3](#week-3)
  - [Week 4](#week-4)
  - [Week 5](#week-5)
- [Reflection](#reflection-)
  - [Web App From Scratch](#web-app-from-scratch)
  - [CSS To The Rescue](#css-to-the-rescue)
  - [Real Time Web](#real-time-web)
  - [Git/GitHub](#git/github)

## Description 📝

In this repo I will describe my personal learning goals that I had set for the meesterproef, why I had set them and what I have done to acieve them. To see the project itself go [here](https://github.com/RobinStut/meesterproef/tree/development).

## The Project 🏷

Within the Southeast district of Amsterdam, the Sports promotion department is responsible for implementing the local sports promotion policy. The department is working on an accessible sports environment for all Amsterdam residents, where everyone can find the offer that suits him / her and can enjoy the sport. The Sports Stimulation department in Southeast has the desire to bring all sports, from events to workshops, to the center of attention through an app.

I worked on this project togheter with three other students: [Robin Stut](https://github.com/RobinStut), [Sterre van Geest](https://github.com/sterrevangeest) and [Jesse Dijkman](https://github.com/jesseDijkman1). Although we were working togheter on this project, it was also important that we worked on our own personal learning goals.

Our team worked togheter with four students from the UX minor to create a socail web app that could be used by both residetns of Southeast, sportproviders and sportsbrokers as a way to make more people join sportsclubs in Southeast.

### The Stakeholders

- **The residents of Southeast (young and old):** They want to use the app to find sports that they maybe wouldn't have thought about at first at first. They need to be inspirited
- **The sport providers:** They want to use the app to reach the residents by creating a personal page for their club or organisation where they can post events for example.
- **The sport brokers:** They want to have a list of all sports that they can browse through to help people find a fitting sport.

### The Context

The context in which the app will be used will most of the time consist of people using there smartphone to use the app, which can be anywhere.

### Design Decisions

- Event based

## Learning Goals 🎓

These are my learing goals for the meesterproef:

| Coures                   | Goal                                                | Description                                                                                                                             |
| ------------------------ | --------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------- |
| **Web App From Scratch** | _App structure and code quality._                   | In this project I want to pay close attetion to setting up the project in a modules and making sure we follow code guidlines.           |
|                          | _Retrieve, manipulate and display data._            | Since there is the potential that there will be a lot data that is displayed, I want to look into client side maniplution of that data. |
| **CSS To The Rescue**    | _The Student understands the broader scope of CSS._ | I want to apply [BEM](http://getbem.com/introduction/) since I didn't get the opportunity during the CSS To The Rescue course.          |
| **Real Time Web**        | _Data Managment._                                   | I want to put extra though into data managment since I wasn't really able to do this in the Real Time Web course.                       |

And not a rubic from the previous courses but I want to learn more about working togheter on a Git/GitHub project.

| Technology | Goal                 | Description                                                                                  |
| ---------- | -------------------- | -------------------------------------------------------------------------------------------- |
| **Github** | _Project work flow._ | I want to learn how to work together with other developers on a project that uses Git/GitHub |

See [here](#reflection-) for my reflection on my learing goals.

## Design Rationale 📑

See the following [Gitbook](https://meesterproef.gitbook.io/design-rationale/) for the design rationale.

## Product Biography 🛠️

Here I will describe the process of each week.

### Week 1

_27-31 juli_

Altough the project officially started in the week of the 27th of juli we had the kick-off a week earlier. During the kick-off we sat down with Harry from the sports promotion department, Daan from the [Academie van de Stad](https://academievandestad.nl) and the UX students from the UX minor. Harry gave a brief intro where he talked about what the project wants to acieve: To get more people to join a sports club. He continued by saying that there is a lot of offer but just not enough partisipants. So he wants to create platform where all the information that is already out there comes togheter in one place, a webapp/website.

The UX students already started working on the project 2 weeks earlier during their minor and they presented the early stages of their concepts. They all basically came down to the same thing: A place where people can share and lookup sports, stories and events and find out what sports fits them through a online quiz. They want sport providers to have a seperate enviorment where they can create events and add other information about their sport club/organization to the platform.

We then started discussing what we could and what we could not do. The whay we saw it we could setup most of the platform, even if it where just static pages, and then work out what was really needed. Due to the lack of wireframes at the moment we weren't really able to make a clear promise of what we would deliver.

The plan for the first week was that the UX'ers would finish their wireframes on monday and present them to us and Harry on thuesday.

On thuesday the 28th the UX students gave their presentation where they adressed the following points:

###### The Problem

> "There are many sport providers in Zuidoost (around 180), but the participation of the inhabitants (around 900.000) in sport activities there is the lowest in whole Amsterdam. Providers often have difficulty in spotlighting their offer and potential users may have problems to find what they are looking for." - UX Students

###### The Assignment

> "Design digital interfaces so the full range of sports in Zuidoost in the first place and secondly for whole Amsterdam can be reached. The platform should function as an overview for all sport offerings." - UX Students

The most important goal is to: **"Increase sport activity of the inhabitants of Zuidoost."**

The platform should be focusing on the following aspects:

- Information
- Self-Actualization
- Community

After that the UX students presented their wireframes. Harry was very happy with the progress so far and would provide us with people so we could test the wireframes in week 2.

We, the team of web dev students, said that we would start setting up the project the following day.

### Week 2

_3-8 juni_

We started the second week by continuing to project setup. During the (long) weekend we also had made agreements with the test groups that we were put into contact with by Harry and Daan that we would be testing on thuesday. The test group consistet of young people from a local school between the ages of 12 and 17 and a sportprovider named Gilbert who turned out to be a coach for a walking soccer team which consisted of elderly people.

On monday we started by setting up a simple HTML and CSS prototype. We dind't want to work to far ahead since we would be testing the next day and the concept could change. We also met the the UX students to go over the (new) wireframes and discuss the testing for thuesday. Me and Jesse would join Johanna to go and test with Gilbert and Robin and Sterre would join Lisa and Christian to test at the local school.

![Meeting](https://i.imgur.com/X5TOKT9.jpg)

> Our meeting with the UX students.

On thuesday me, Jesse and Johanna met with Gilbert and his people. What should have been a user test of the wireframe prototype that Johanna had build turnt more into a interview which didn't really matter because we got alot of usefull information. For Gilbert and his people, which were mostly all elderly, the most important thing was to stay healthy and keep moving. They didn't what to be stuck at home with nothing to do.

An other important aspect was the social one. They got to meet alot of people which they would continue to see both on and off the field. This creates a real community. They also highlighted that the webapp should be able to be used by older and newer devices, both mobile and desktop, because not everybody in Southeast has a smarthphone.

![User test photo](https://i.imgur.com/34moKBk.jpg)

> The test with Gilbert and people from the walking soccer team.

After the tests we met with the rest of the team to discuss results. After that we went to the Bijlmer Sportpark to meet with Daan and Vincent, a sportsbroker who would fill on for Harry because he was on vacation. Here we once again discussed testing results and got some usefull feedback from Vincent. He told us that a lot of times people come to him with questions about where their childeren could sport. For him to have a list of all sports and clubs would be really helpfull. He also gave us an other lead for potential testing groups.

The rest of the week we started working on actually making stuff. The goal was to finish the homepage and have a semi working quiz by the start of next week so we could test again. Working with four developers on one project was kind of a challange for us since whe had never done it before. So whe had do dive in to using Git branches and start setting up modules.

Our folder structure looked something like this:

```
root
|
|- data/
|  |
|  |- json/
|  |- raw/
|
|- modules/
|
|- public/
|  |
|  |- css/
|  |  |
|  |  |- modules/
|  |  |- styles.css
|  |
|  |- images/
|  |
|  |- js/
|     |- modules
|     |- script.js
|
|- views/
|  |
|  |- pages/
|  |  |- index.ejs
|  |- partials/
|
|- app.js
|
```

The most important thing was to use modules. If we would made sure everybody was working on their own modules we would eliminate a large part of the merge conflicts.

On thursday Sterre had finished a visual design that would act as our baseline for the UI. I started working on applying the styles to the HTML/CSS prototype for the rest of the week.

![Homepage UI Design](https://i.imgur.com/spBNCcq.png)

> The UI design for the homepage.

On friday we also had our first meeting with Koop in which we discussed the progress of the project. And I will be honest that I got kind of... vocal. I pointed out that I wasn't to happy with how the UX'ers where using us to make the testing appointments because, them speaking english, they fought it would be better if we did it which kind of rubbed me the wrong way. Whe then started discussing the cooperation between the two minors and Koop pointed out some serious flawes in the concept and found it more of an idea than a serious concept. I dind't really see the problem, we are the developers in this situation, we make the stuff they come up with. Concepting is their speciality.

Koop saw this differently. He said we needed to be more active in the concepting process and build more prototypes to test asumptions/ideas. I disagreed. I said that I dind't choose the web dev minor to start working on concepts and that I wanted to make one single solid product, not a bunch of spaghetti code prototypes.

Now I said I understaind that we come from CMD, we are not brainless developers that just make what they are given. But for the meesterproef we get graded for what we make, not the concept. Koop still disagreed. I said "Well I choose the wrong project then."

So after our meeting we said down and started prioretising the most important features in the app. Whe made a MoSCoW chart. I would start working out the sport provider flow of creating events since I wanted to focus on data managment.

![MoSCoW](https://i.imgur.com/bkKiAp4.jpg)

> Our (simple) MoSCow chart.

### Week 3

_10-14 juni_

On thuesday I finished up the HTML/CSS prototype. Since me and Sterre where occupied for the rest of the day Robin and Jesse went on to sit down with the UX'ers and discuss the quiz, which was nearing its stage of being functional, and show how the prototype was looking.

![Meeting photo](https://i.imgur.com/vkwbWw6.jpg)

> Robin and Jesse meeting with the UX'ers.

Then on wednesday I started to work on creating events as a sport provider. I started by thinking and drawing out how I wanted the data to flow through the application. These are a couple of very lo-fi sketches.

![Sketch 1](https://i.imgur.com/GgvZTpH.jpg)

> Skecth 1

![Sketch 2](https://i.imgur.com/fEkSBtB.jpg)

> Skecth 2

I really wanted to make sure the data flow would be as well thought out as possible and make sure it was ready for real life situation. I was thinking about a couple of different things: How is the data model gonna look? Do I store event data together with sport provider data? Where am I gonna store the data? What data do I even need for a event?

I started by setting up a basic HTML `form` and started adding `input` fields like title, description, date etc. Since we would not work with a real database I had to save on the server. So alot of my time in the third week went into setting up the user flow and thinking about how I wanted the data to look and behave.

At the end of the week we also had a other meeting with Koop. We discussed our progress and showed him the now pretty much finished quiz. We also continued our conversation about working togheter with the UX'ers. It became pretty clear that we just could not wait for them to develop their concept further. We also had the feeling that the UX'ers don't really know what to expect of us, what we can do. They are very much stuck in their personal grading and are focusing less on the project and the team work that could be happening but just isn't. So we decided that we would continue with our own concept.

During our talk with Koop it became clear that the app and the people using it would benefit more from more focus on events than the actual sport clubs themselves. The idea from the UX'ers was that, for example, at the end of the quiz you would get a couple of sports that would fit you the most and if you click on a sport you would get a list of sport clubs for that sport. But why? The whole problem is that people don't join sport clubs so why not show a list of events so people can try out the sport?

So thats what we did. We decided to focus more on events so that we could use that as the connecting element for the features that we were working on.

### Week 4

_17-21 juni_

Week 4, the week om some (kinda?) big changes. On thuesday we would have another meeting with Vincent, Daan and the UX'ers where we would show our digital prototype for the first time. Kinda late but this was because we didn't have a meeting in week 3. So on monday we focused on finishing up some small details so that our prototype would be ready for the next day.

I worked on creating a events page that would show all the events that where created. In the futher I also wanted to add a filter so the user would be able filter the events to find something to their likeing. When we where working on monday I got the feeling that the project structure was kinda begining to derail so this was something I wanted to adress the next day.

So on thuesday we would have the meeting at 16:00 PM. We started the day by working on our project structur. I had noticed that our modules folders where beginning to get kind of crowed with all kind of different module files and we all started to loose the overview of what module was for what. So we started to draw ot a new structure.

![Drawing Structure](https://i.imgur.com/t0zYToS.jpg)

> Drawing the new module structure.

The goal was to create new folders inside the current modules folders for each page and rename the files acordingly with a prefix of that page. This way every folder would be setup in the same way and people can quickly see what module is for what.

![New Structure](https://i.imgur.com/bbKRkQj.jpg)

> The finished new module structure.

We also went to sit down and discuss our code. Also here things where kinda getting messed up so it was time for a refactor. We were rewriting things that didn't nead rewriting, code was wrtitten outside of its module and we were kinda slacking on the code guidelines. So we discussed what we needed to do for the CSS, client side Javascript and for the Node.js modules to get it back into order again. We also all installed Prettier so that we could keep writing in our own style but on save every would be formated to the guidelines.

![Refactor Class](https://i.imgur.com/kiDbAoB.jpg)

> The refactor class

This is some stuff we should have done in the beginning. We just got carried away with just starting to code that we dind't really think it through.

In the afternoon we met with Vincent, Daan and the UX'ers to discuss progress. I held a short presentation where I showed the prototype and walked through the features while also explaining our new concept of focusing more on the events. We got some mixed reviews. Vincent askes why we could not have both the sport clubs and events at once. We explaind that you could have that but you want to give people the opertunity to try out a sport first before you direct them to a page where they can subscribe for a membership. I got the feeling that Vincent was still sceptical.

I think the problem was that we put alot of work into things that they could not directly see. For example when the UX'ers showed they visual design prototype that they made in XD, there were some fancy animations and stuff that the client liked but we knew was not real.

We also explained what we would deliver in the end. Vincent was under the impression that he would get a fully functional product, which, we explained, was just not possible in the time that we had. We said that they would get a prototype that they could use to test further and use as a basis to start developing futher on.

After the presentation we made the desicion to strip the prototype of all the excess links that we would develop further so that every thing that was there, they would be able to use. We would continue working on three user flows:

- **The user:** The flow the user goes through to find sports that match him and events that he can join to try out that sport.
- **The sport provider:** The flow the sport provider goes through of adding a event.
- **The sportsbroker:** The flow the sportsbroker goes through of finding a sport for someone that comes to him for help.

On wednesday we started our big refactor we discussed the day before. We divided the refactors into four branches: `refactor/ejs-refactor`, `refactor/css-refactor`, `refactor/js-refactor` and `refactor/node-refactor`. I worked on the CSS refactor. After the refactor I went on to do some bug fixes that were created during the merging of all the branches.

The rest of the week I continued work on the adding of events. On thursday we also wanted to work out our data management better. We noticed that alot, if not all, of the time we where fetching all the data again and again. So we worked out the flow of what should happen when we already have and don't have the data. This was the result:

![Data management](https://i.imgur.com/RdGDRuj.jpg)

> New data management flow.

### Week 5

_24-27 juni_

The final week consistet mostly of finishing up the project and rooting out any bugs. On monday we met with Koop and disscused how we should prepare for our presentation with the client on wednesday. We decided that the main focus should be on finishing up the design as much as possible and root out any inconsistencies as much as possible.

We finished this up on thuesday and started preparing our presentation. In the presentation we wanted to be as clear as we could about our concept and the three use cases we worked out within the prototype. Aside from the presentation we continued to fix any last bugs and styling issues.

On wednesday we had our presentation for Harry, Vincent and Daan. We gave a brief introduction and talked about the research that the UX students had done and what we had worked out in our prototype and gave a quick demo. Harry, Vincent and Daan where very pleased with the end result and asked us for some tips on how to approach the actual realisation of the project.

## Reflection 🔬

Here I will reflect on my learning goals which I set in the beginning of the project and describe what I did to achieve these goals.

### Web App From Scratch

Having seperate modules for each page/feature is a good first step in avoiding unnecessary problems. Modules allow you to seperate your code into different files that get imported into the main file like `app.js`, `script.js` or `style.css`. When you do this you and your team are able to almost entirly eliminate merge conflicts because you are all working in seperate files so you almost never have to work in the same file at the same time. This is something that I learned about in the first couple of weeks of the minor and wanted to take to the next level for the meesterproef.

As you can see in [week 2](#week-2) we wanted to apply modules to both the Node server the client side JavaScript and, something that I dind't know existed, CSS. Even to it is pretty simple, let me show you how it works.

In this chase inside `styles.css` you can import different CSS files. We had the root CSS file where `styles.css` was located and all the modules where inside the modules folder.

```css
/* ---------- GLOBAL ---------- */
@import "./fonts.css";
@import "./root.css";
@import "./general.css";

/* ---------- HEADER ---------- */
@import "modules/header/header.css";
@import "modules/header/header-sidebar.css";

/* ---------- HERO ---------- */
@import "modules/hero.css";

/* ---------- HOMEPAGE ---------- */
@import "modules/home/homepage-quiz.css";
@import "modules/home/homepage-community.css";
@import "modules/home/homepage-places.css";
@import "modules/home/homepage-healthy-living.css";

/* ---------- QUIZ ---------- */
@import "modules/quiz/quiz.css";
@import "modules/quiz/quiz-carousel.css";

/* ---------- SPORTS ACTIVITIES A-Z ---------- */
@import "modules/sportslist/sportslist.css";

/* ---------- SPORTPROVIDER ---------- */
@import "modules/sportprovider/sportprovider-login.css";
@import "modules/sportprovider/sportprovider-dashboard.css";
@import "modules/sportprovider/sportprovider-create-event.css";

/* ---------- EVENTS ---------- */
@import "modules/events/events.css";

/* ---------- FOOTER --------- */
@import "modules/footer/footer.css";
```

Modules allowed us to clearly divide code into there own little environment. We did run into some problems later on to that required attetion. Most of this can be read about in [week 4](#week-4) but let me touch upon it here as well. I had noticed that our modules folders where beginning to get kind of crowed with all kind of different module files that were all located on the same level and we all started to loose the overview of what module was for what. So we started to draw ot a new structure.

![Drawing Structure](https://i.imgur.com/t0zYToS.jpg)

> Drawing the new module structure.

We also went to sit down and discuss our code. Also here things where kinda getting messed up so it was time for a refactor. We were rewriting things that didn't nead rewriting, code was wrtitten outside of its module and we were kinda slacking on the code guidelines. The guidelines that we setteld own where the follwoing:

- Dubble `"` instead of single `'`.
- No `;` at the end.
- Multiple variables would each have `const` or `let` written infront of them. No `,` seperation.

![Refactor Class](https://i.imgur.com/kiDbAoB.jpg)

> The refactor class

Alot of the things we did later on in week 4 should have been discussed in week 1. This was a learing moment for me because now we where spending time on discussing realativly simple stuff that can have such positive impact on your workflow, especially in a team, to late into the project. But also learned that I get a great amout of personal satisfaction of creating the structure of a project. For me the next step to take this even further would be to create components using a framework like React for example.

### CSS To The Rescue

For CSS To The Rescue I wanted to learn about using the [BEM](http://getbem.com/introduction/) method to organize our CSS styles. During the course its self I was assigned using no classes and ids so I saw the meesterproef as a good place to apply BEM. Another reason for me to learn about BEM was because during the weekly mingles I saw that alot of companys where using it.

Let me start by giving a short introduction of what BEM is. BEM is a method for organizing your CSS to make you able to work faster and write less. It allows you to:

- Work more modular.
- Re use more.
- Structure better.

BEM stands for 'Block, Element, Modifier'. The _block_ being the main element which can be a `button` or `article` for example. The _element_ is part of a block, for example a `p` or `ul`. And finaly the _modifer_ which is used to desribe the state of the _block_ or _element_ so for eample `highlighted` or `required`.

So let me give you an example from the project. Our `button` for example. So you start with your _block_ level element class name, which in our case was button. This class gives the button its basic shape and color which can be expanded on with _modifiers_.

```css
.button {
	display: block;
	margin: 0 auto;
	padding: 1em 2em;
	width: fit-content;
	color: var(--text-color);
	font-size: var(--font-size-15px);
	font-weight: 600;
	text-decoration: none;
	text-transform: uppercase;
	border-radius: 25px;
	transition: 0.2s;
}
```

A example of a _modifier_ can be `--ghost` which gives the button a border with a small drop shadow. But also `--solid-white` or `--solid-yellow`.

```css
.button--solid-yellow {
	background-color: var(--secondary-color);
}

.button--solid-white {
	background-color: var(--white);
}

.button--ghost {
	background-color: var(--white);
	border: 1px solid var(--text-color);
	box-shadow: 0px 4px 10px 0px rgba(0, 0, 0, 0.2);
}
```

The ultimate goal with BEM is to work faster and smarter, especially in a large team with a large project. I personally really love this way of structuring your CSS because it gives you so much power and really goes a long way into eliminating unnecessary repeating. I did notice to that BEM can become a little bit awkward when used for items that you know wont be repeated since you start to make sometimes pretty specific classes to wont be reused.

It is also something you should try to set up and discuss as much as you can in the beginning of a project especially if you work with people wo don't have any previous experience with BEM. If you start later on it becomes a little bit more difficult to manage.

### Real Time Web

For Real Time Web I really wanted to dive deep into data management. During the course itself I didn't really have the change to do this so this seemt like a good place to do so, especially when there is a lot of user generated data that needs to go somewhere. As you can see in [week 3](#week-3) I started by drawing rough sketches of how the data model should look when a sport provider creates a event.

After that I started translating these skechtes into actual objects.

###### Version 1

```js
let event = {
	general: {
		sportProviderId: Math.random(),
		title: req.body["event-name"],
		description: req.body["event-description"]
	},
	sport: {
		sportName: req.body["event-sport"],
		category: req.body["event-category"]
	},
	location: {
		city: req.body["event-city"],
		address: req.body["event-address"]
	},
	time: {
		timeStart: req.body["event-from-time"],
		timeEnd: req.body["event-till-time"]
	},
	date: req.body["event-date"]
}
```

My goal was to be as precise as I could when making these objects, so thats why there are multiple objects within objects. The object itself whent through multiple changes, for example when we decided that their needed to be a difference between trainings and events and the ability to upload images.

###### Version 2

```js
let event = {
	general: {
		id: Math.random(),
		title: req.body["event-name"],
		description: req.body["event-description"],
		image: req.file ? req.file.filename : null,
		type: req.body["event-type"],
		recurring: req.body["event-recurring"]
	},
	sport: {
		name: req.body["event-sport"],
		category: req.body["event-category"]
	},
	location: {
		name: req.body["event-location-name"],
		city: req.body["event-city"],
		address: req.body["event-address"]
	},
	time: {
		date: req.body["event-date"],
		start: req.body["event-from-time"],
		end: req.body["event-till-time"]
	}
}
```

###### Version 3

```js
let event = {
	general: {
		id: Math.random(),
		title: req.body["event-name"],
		description: req.body["event-description"],
		image: req.file ? req.file.filename : null,
		recurring: req.body["event-recurring"]
	},
	sport: {
		name: req.body["event-sport"],
		category: req.body["event-category"]
	},
	location: {
		name: req.body["event-location-name"],
		city: req.body["event-city"],
		address: req.body["event-address"]
	},
	time: {
		date: req.body["event-date"],
		start: req.body["event-from-time"],
		end: req.body["event-till-time"]
	}
}
```

The flow of saving the data on the server worked as follows: The module has two parameters: `conceptEvents` and `eventsData` which are variables with empty arrays that are on the server. `conceptEvents` will be filled when the sport provider first makes a event but hasn't published it yet. Then when he wants to publish the event, the folowing `POST` request fires. Whe check if the url is `/publish-event` and if the `eventsData` array is empty. If it is whe push the data from `conceptEvents` into it and clear `conceptEvents` before we redirect the user to the events page.

But if the `eventsData` is not empty whe start a check. Whe try to `find()` a matching title. This is to prevent duplicate events. If the tile doesn't exist we fill `eventsData`.

```js
module.exports = (app, fs, conceptEvents, eventsData) => {
	app.post("/publish-event", (req, res) => {
		if (req.url === "/publish-event" && eventsData.length === 0) {
			console.log(conceptEvents)

			eventsData.push(conceptEvents[0])

			conceptEvents.length = 0

			res.redirect("/events")
		} else if (eventsData.length > 0) {
			const exists = eventsData.find(e => {
				return (
					e.general.title.toLowerCase() ===
					conceptEvents[0].general.title.toLowerCase()
				)
			})
			if (!exists) {
				eventsData.push(conceptEvents[0])

				conceptEvents.length = 0

				res.redirect("/")
			} else {
				console.log("Sorry, that event already exists.")

				res.redirect("/")
			}
		}
	})
}
```

The biggest challange came when we made the change from saving data on the server, to saving the data in a seperate JSON files and thinking of how they needed to work together. The obvious first argument to do this was because every time the server would restart the data would be lost since whe didn't have a database and whe had to store the data somewhere else. But whe also had to think about what would happen when we already had fetched the data once before and what when we had not yet. Thats where our data management discussion from [week 4](#week-4) comes in.

Here is once again the diagram that we drawed:

![Data management](https://i.imgur.com/RdGDRuj.jpg)

> New data management flow.

So idea was this: We had one fetch function that we would all use. That function would have two parameters: The URL of the JSON file that we wanted to fetch and a server variable like `eventsData` for example that stored event data on the server itself in an array. When ever the function was called it would check if the array was empty, which would mean the data hadn't been fetched before, and if it was fill the array with data from the URL and return that array. Otherwise when the requested data had been fetched before we would just return the data that is already on the server stored in `eventsData` in this case.

Later I also altered the previous shown `POST` request to also create a JSON file with all the data from `eventsData` so that we could `fetch()` that file.

```js
fs.writeFile(
	"./data/json/sportEvents.json",
	JSON.stringify(eventsData),
	err => {
		if (err) {
			return console.log(err)
		}
	}
)
```

This was really something that I learned a lot from since I dind't have to think about it before. And it really is true what they say: Think before you start programming. That is something that I learnt you can apply to all apects of a project. When you know what you want to do and where you want to work towards, you can work so much faster.

And it is really valuable to talk with your team about these kind of things so that everybody is on the same level and understands what there needs to happen and what they can expect when it's finished.

### Git/GitHub

When it comes to Git/GitHub I really learnt alot, even how unimportant or simple it may seem. When I started on this project I never worked with multiple developers on one project. I also never really utilised all the options of Git or GitHub for that matter. So one of the first things I did was to write a small Git manual on how to work with multiple branches.

###### Branch Structure

```
master: The main branch. Everything thats on here works 100%.
|
|- development: The branch that we are working on. Development should be merged every week with master.
|  |
|  |- feature/name: The branch you create to work on a feature. Before you create a new feature you must pull from development.
|
```

We also followed some guidelines from [Maikel van Veen](https://github.com/Maikxx) which came pretty close to what I was already doing in personal projects. [Version Control Guidelines](https://github.com/Maikxx/360-wallscope/blob/master/docs/guidelines/VERSION_CONTROL.md) sets a clear set of rules as to how your commits (and branches) should look. So something like `action(scope): description`.

When you write a commit you start with one of the following `action` tags:

- **feature(scope):** This is for when you create a new feature.
- **fix(scope):** This is for when you fix a bug.
- **refactor(scope):** This is for when you rewrite a piece of code so that it looks better, or is written in a nicer way.
- **copy(scope):** This is for when you change the copy of a piece of text in the application or are writing docs.

Then comes the `(scope)`, which can be whatever you are working on. For example `(create-event)` or `(login)`.

Then comes the `description`. I personally always make sure elements match with how they look when writing the `description`. For example:

- Files have their file extension next to them. For example `style.css` or `script.js`.
- HTML elements are put between `< >`. So for example when you have added a section you write `<section>`.
- New CSS styling looks like this for example `.shiney-class` or `#important-id`.

The most important thing is that your fellow developers can easily see what you have been working on.

After a small hearth attack when someone, I wont name any names, accidentally deleted the `development` branch, we also activated branch protection. This allows to to set sertain rules for a branch. For example when you are finished working on a feature you can't just merge it with `development` and push it to the repository. You have to create a pull request that has the required number of approving reviews before it is allow to be merged into master.

![Branch Protection](https://i.imgur.com/ixlVbpz.png)

> Branch Protection Settings

So after being able to dive into these conventions and features, I got a better image of how companies work with Git/GitHub in the real world and this feels like one of the last things that I needed to be introduced to.
